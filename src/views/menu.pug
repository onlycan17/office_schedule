extends base

block content
    if errorMessage 
        span=errorMessage
    form(method="post")
        input(placeholder="메뉴명", name="menuName", type="text", require ) 
        input(placeholder="메뉴주소",name="menuUrl", type="text" ) 
        input(placeholder="정렬순서",name="order", type="number", require ) 
        select(name="userId")
            option(value="") 선택
            each item in userList
                option(value=`${item._id}`) #{item.name}_#{item.email}
        select(name="departmentId")
            option(value="") 선택
            each item in departmentList
                option(value=`${item._id}`) #{item.name}            
        input(type="submit", value="등록")        
    table
        each item in menuList
            tr
                th 메뉴명
                th 메뉴주소
                th 순서 
                th 삭제 
            tr
                td 
                    a(href=`/menuDetail/${item._id}`) #{item.menuName}
                td #{item.menuUrl}
                td #{item.order}
                td 
                    a(href=`/menuDelete/${item._id}`) ❌
            tr
                th 
                th 이름
                th 이메일        
            if(item.user)
                each userItem in item.user
                    tr
                        td
                        td #{userItem.name}
                        td #{userItem.email}
                else 
                    tr 
                        td 사용자가 없습니다.
                    tr
                        th  
                        th 부서
                        th 
            if(item.department)
                each departmentItem in item.department
                    tr
                        td
                        td #{departmentItem.name}
                        td
                else 
                    span 부서가 없습니다.            
        else 
            li 
                span 메뉴를 등록해 주세요.